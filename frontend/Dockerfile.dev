# Use Node.js v20 (full image, not alpine, because Vite sometimes needs build tools)
FROM node:20

# Set working directory inside the container
WORKDIR /app

# Copy only package.json (not source code yet) so Docker caching can work
COPY package.json ./

# Install dependencies
# We use "npm install" (not npm ci) so that npm can pick the right optional binaries
# (important for cross-platform builds like linux/arm64 vs macOS)
RUN npm install

# Copy the rest of the source code (after deps are cached)
COPY . .

# Expose port 5173 (default for Vite dev server)
EXPOSE 5173

# Start the Vite dev server and make it accessible on all interfaces (0.0.0.0)
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]

